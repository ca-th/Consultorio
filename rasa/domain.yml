version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - thank_you
  # --- Intenções do Formulário (mantidas para Histórias) ---
  - inform_specialty
  - inform_date
  - inform_time
  - inform_doctor
  - inform_reason
  # --- Intenções ADICIONADAS para corresponder às Regras ---
  - bot_challenge
  - perguntar_ao_llm # Nome unificado (antes era ask_llm)
  - agendar_consulta
  - stop
  - ask_horario_geral
  - ask_servicos
  - ask_horario_medico_especifico
  - ask_contato
  - ask_endereco
  - ask_telefone
  - ask_email

entities:
  - especialidade
  - data_consulta
  - hora_consulta
  - nome_medico
  - motivo_consulta

slots:
  especialidade:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: especialidade
  data_consulta:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: data_consulta
  hora_consulta:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: hora_consulta
  nome_medico:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: nome_medico
  motivo_consulta:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: motivo_consulta

forms:
  agendamento_consulta_form:
    required_slots:
      - especialidade
      - data_consulta
      - hora_consulta
      - nome_medico
      - motivo_consulta

actions:
  - action_perguntar_llm
  - validate_agendamento_consulta_form
  - action_submit_agendamento

responses:
  utter_greet:
    - text: "Olá! Como posso ajudar você hoje?"

  utter_goodbye:
    - text: "Até logo!"

  utter_ask_especialidade:
    - text: "Qual especialidade você está procurando?"

  utter_ask_data_consulta:
    - text: "Para qual data você gostaria de agendar a consulta?"
    - text: "Por favor, me diga a data desejada."

  utter_ask_hora_consulta:
    - text: "Qual horário seria melhor para você?"
    - text: "Em que horário você gostaria de agendar?"

  utter_ask_nome_medico:
    - text: "Você tem alguma preferência de médico?"
    - text: "Qual o nome do médico, se houver?"

  utter_ask_motivo_consulta:
    - text: "Qual o motivo da sua consulta?"
    - text: "Poderia descrever brevemente o motivo da consulta?"

  utter_ask_llm:
    - text: "Estou pensando na sua pergunta..."
    - text: "Por favor, aguarde enquanto busco a resposta..."

  utter_cheer_up:
    - text: "Anime-se! Posso ajudar com algo mais?"

  # --- Respostas ADICIONADAS para corresponder às Regras ---
  utter_iamabot:
    - text: "Eu sou um assistente virtual."

  utter_forms_deactivated:
    - text: "Ok, cancelado."

  utter_submit_agendamento_consulta_form:
    - text: "Ok, aqui está o resumo do seu agendamento: [resumo aqui]. Você confirma?"

  utter_horario_geral:
    - text: "Nosso horário de funcionamento é de segunda a sexta, das 8h às 18h."

  utter_horario_medico_info:
    - text: "Para saber o horário de um médico específico, por favor, me diga o nome do médico."

  utter_contato:
    - text: "Você pode entrar em contato através do telefone (XX) XXXX-XXXX ou pelo e-mail contato@clinica.com."

  utter_endereco:
    - text: "Nosso endereço é Rua da Clínica, 123, Bairro Saúde, Cidade-UF."

  utter_telefone:
    - text: "Nosso telefone para contato é (XX) XXXX-XXXX."

  utter_email:
    - text: "Nosso e-mail para contato é contato@clinica.com."

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
