version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - agendar_consulta
  - inform_specialty
  - inform_date
  - inform_time
  - inform_doctor
  - inform_name
  - inform_reason
  - afirma_rotina
  - nega_rotina
  - perguntar_ao_llm # Confirme se esta intent está aqui, ela está em suas regras
  - ask_horario_geral # Confirme se estas intents de FAQ estão aqui
  - ask_servicos
  - ask_horario_medico_especifico
  - ask_contato
  - ask_endereco
  - ask_telefone
  - ask_email

entities:
  - especialidade
  - data_consulta
  - hora_consulta
  - nome_medico
  - motivo_consulta
  - nome
  - cadastro_pessoa_f
  # - sintoma_texto # Se você usa esta entidade em algum NLU ou história, adicione-a aqui

slots:
  especialidade:
    type: text
    mappings:
      - type: from_entity
        entity: especialidade

  data_consulta:
    type: text
    mappings:
      - type: from_entity
        entity: data_consulta

  hora_consulta:
    type: text
    mappings:
      - type: from_entity
        entity: hora_consulta

  nome_medico:
    type: text
    mappings:
      - type: from_entity
        entity: nome_medico

  motivo_consulta:
    type: text
    mappings:
      - type: from_entity
        entity: motivo_consulta

  nome:
    type: text
    mappings:
      - type: from_entity
        entity: nome

  cadastro_pessoa_f:
    type: text
    mappings:
      - type: from_entity
        entity: cadastro_pessoa_f

forms:
  agendamento_consulta_form:
    required_slots:
      - especialidade
      - data_consulta
      - hora_consulta
      - nome_medico
      - motivo_consulta
      - nome
      - cadastro_pessoa_f

responses:
  utter_greet:
    - text: "Olá! Em que posso ajudar hoje?"

  utter_goodbye:
    - text: "Tchau! Até breve."

  utter_ask_especialidade:
    - text: "Qual especialidade médica você precisa?"

  utter_ask_data_consulta:
    - text: "Qual a data desejada para a consulta?"

  utter_ask_hora_consulta:
    - text: "Qual o horário da consulta?"

  utter_ask_nome_medico:
    - text: "Há um médico de preferência?"

  utter_ask_motivo_consulta:
    - text: "Qual o motivo da consulta?"

  utter_ask_nome:
    - text: "Qual o seu nome completo?"

  utter_ask_cadastro_pessoa_f:
    - text: "Você já é cadastrado(a) na nossa clínica?"

  utter_submit_agendamento_consulta_form:
    - text: |
        Confirmando:
        Quero marcar uma consulta em {data_consulta} às {hora_consulta} com {nome_medico} ({especialidade}).
        Motivo: {motivo_consulta}.
        Nome do paciente: {nome}.
        Cadastrado: {cadastro_pessoa_f}.
        Posso confirmar?

  utter_ask_affirm:
    - text: "Certo! Posso confirmar o agendamento?"

  utter_ask_deny:
    - text: "Tudo bem! O agendamento foi cancelado."

  # --- RESPOSTAS CORRIGIDAS/ADICIONADAS ---
  utter_iamabot:
    - text: "Eu sou um assistente virtual, não um humano."

  utter_forms_deactivated:
    - text: "Ok, o formulário foi desativado."

  utter_horario_geral:
    - text: "Nosso horário de funcionamento é de segunda a sexta, das 8h às 18h."

  utter_horario_medico_info:
    - text: "Para saber o horário de um médico específico, por favor, me diga o nome dele."

  utter_contato:
    - text: "Você pode nos contatar pelo telefone (XX) XXXX-XXXX ou e-mail contato@clinica.com."

  utter_endereco:
    - text: "Estamos localizados na Rua Exemplo, 123, Bairro Centro, Cidade."

  utter_telefone:
    - text: "Nosso telefone é (XX) XXXX-XXXX."

  utter_email:
    - text: "Nosso e-mail é contato@clinica.com."

  # --- SE VOCÊ TIVER AÇÃO 'action_perguntar_llm', ELA PODE TER UMA UTTTER ANTES ---
  # utter_ask_llm:
  #   - text: "Certo, vou verificar isso com o LLM."


actions:
  - action_submit_agendamento
  - action_agendar_consulta
  - action_cancelar_agendamento
  - action_perguntar_llm # Certifique-se que esta ação customizada está listada aqui

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true