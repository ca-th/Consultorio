version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - agendar_consulta
  - inform_specialty
  - inform_date
  - inform_time
  - inform_doctor
  - inform_name
  - inform_reason
  - afirma_rotina
  - nega_rotina

entities:
  - especialidade
  - data_consulta
  - hora_consulta
  - nome_medico
  - motivo_consulta
  - nome
  - cadastro_pessoa_f

slots:
  especialidade:
    type: text
    mappings:
      - type: from_entity
        entity: especialidade

  data_consulta:
    type: text
    mappings:
      - type: from_entity
        entity: data_consulta

  hora_consulta:
    type: text
    mappings:
      - type: from_entity
        entity: hora_consulta

  nome_medico:
    type: text
    mappings:
      - type: from_entity
        entity: nome_medico

  motivo_consulta:
    type: text
    mappings:
      - type: from_entity
        entity: motivo_consulta

  nome:
    type: text
    mappings:
      - type: from_entity
        entity: nome

  cadastro_pessoa_f:
    type: text
    mappings:
      - type: from_entity
        entity: cadastro_pessoa_f

forms:
  agendamento_consulta_form:
    required_slots:
      - especialidade
      - data_consulta
      - hora_consulta
      - nome_medico
      - motivo_consulta
      - nome
      - cadastro_pessoa_f

responses:
  utter_greet:
    - text: "Olá! Em que posso ajudar hoje?"

  utter_goodbye:
    - text: "Tchau! Até breve."

  utter_ask_especialidade:
    - text: "Qual especialidade médica você precisa?"

  utter_ask_data_consulta:
    - text: "Qual a data desejada para a consulta?"

  utter_ask_hora_consulta:
    - text: "Qual o horário da consulta?"

  utter_ask_nome_medico:
    - text: "Há um médico de preferência?"

  utter_ask_motivo_consulta:
    - text: "Qual o motivo da consulta?"

  utter_ask_nome:
    - text: "Qual o seu nome completo?"

  utter_ask_cadastro_pessoa_f:
    - text: "Você já é cadastrado(a) na nossa clínica?"

  utter_submit_agendamento_consulta_form:
    - text: |
        Confirmando:
        Quero marcar uma consulta em {data_consulta} às {hora_consulta} com {nome_medico} ({especialidade}).
        Motivo: {motivo_consulta}.
        Nome do paciente: {nome}.
        Cadastrado: {cadastro_pessoa_f}.
        Posso confirmar?

  utter_ask_affirm:
    - text: "Certo! Posso confirmar o agendamento?"

  utter_ask_deny:
    - text: "Tudo bem! O agendamento foi cancelado."

actions:
  - action_submit_agendamento
  - action_agendar_consulta
  - action_cancelar_agendamento

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
