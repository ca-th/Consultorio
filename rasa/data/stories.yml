version: "3.1"

stories:

  - story: saudacao
    steps:
      - intent: greet
      - action: utter_greet

  - story: despedida
    steps:
      - intent: goodbye
      - action: utter_goodbye

  - story: caminho do agendamento vago
    steps:
      - intent: agendar_consulta
      - action: agendamento_consulta_form
      - active_loop: agendamento_consulta_form
      # Aqui o form fica ativo até completar os slots
      # Quando termina, ele desativa o form automaticamente
      - action: utter_submit_agendamento_consulta_form
      - intent: affirm
      - action: action_submit_agendamento
      - intent: goodbye
      - action: utter_goodbye

  - story: caminho do agendamento com sintomas
    steps:
      - intent: agendar_consulta
        entities:
          - sintoma_texto: "dor de cabeça"
      - action: agendamento_consulta_form
      - active_loop: agendamento_consulta_form
      - intent: inform_especialidade
        entities:
          - especialidade: "clínico geral"
      # O form continua ativo até preencher todos os slots
      - action: utter_submit_agendamento_consulta_form
      - intent: affirm
      - action: action_submit_agendamento
      - intent: goodbye
      - action: utter_goodbye

  - story: finalizacao do agendamento negado
    steps:
      - action: utter_submit_agendamento_consulta_form
      - intent: deny
      - action: utter_forms_deactivated

