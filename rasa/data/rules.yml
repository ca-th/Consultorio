version: "3.1"

rules:

# --- Regras principais do fluxo de agendamento ---
- rule: Iniciar agendamento
  steps:
    - intent: agendar_consulta
    - action: utter_ask_nome

- rule: Receber nome do paciente
  steps:
    - intent: inform_nome
    - action: utter_ask_especialidade

- rule: Receber especialidade
  steps:
    - intent: inform_especialidade
    - action: utter_ask_nome_medico

- rule: Receber nome do médico
  steps:
    - intent: inform_nome_medico
    - action: utter_ask_data_consulta

- rule: Receber data da consulta
  steps:
    - intent: inform_date
    - action: utter_ask_hora_consulta

- rule: Receber horário da consulta
  steps:
    - intent: inform_time
    - action: utter_ask_motivo_consulta

- rule: Receber motivo da consulta
  steps:
    - intent: inform_motivo_consulta
    - action: utter_agendamento_finalizado

# --- Regras complementares para intents não usados diretamente ---
- rule: Informar motivo da consulta
  steps:
    - intent: inform_motivo_consulta
    - action: utter_ask_motivo_consulta

- rule: Informar nome
  steps:
    - intent: inform_nome
    - action: utter_ask_nome

- rule: Informar nome do médico
  steps:
    - intent: inform_nome_medico
    - action: utter_ask_nome_medico

- rule: Informar horário da consulta
  steps:
    - intent: inform_time
    - action: utter_ask_hora_consulta

# --- Regras para utterances não chamadas diretamente ---
- rule: Perguntar especialidade
  steps:
    - intent: inform_especialidade
    - action: utter_ask_especialidade

- rule: Perguntar data da consulta
  steps:
    - intent: inform_date
    - action: utter_ask_data_consulta

- rule: Finalizar agendamento
  steps:
    - intent: affirm
    - action: utter_agendamento_finalizado

- rule: Identificar assistente virtual
  steps:
    - intent: affirm
    - action: utter_iamabot

- rule: Perguntar telefone
  steps:
    - intent: ask_telefone
    - action: utter_ask_telefone

- rule: Perguntar email
  steps:
    - intent: ask_email
    - action: utter_ask_email

# --- Regra para perguntas ao LLM ---
- rule: Responder com LLM
  steps:
    - intent: perguntar_ao_llm
    - action: action_llm_fallback