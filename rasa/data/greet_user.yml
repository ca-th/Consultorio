version: "3.1"
flows:
  greet_user:
    description: Flow for starting the conversation and greet the user
    steps:
      - action: utter_greet_user
      
      - collect: user_name
        description: collect the name of the user
        
      - collect: cadastro_pessoa_f
        description: an identification 11 digits number

      - action: action_check_existing_user
        next:
          - if: not slots.user_exists
            then:
            - action: utter_inexistant_user
              next: END
          - else: introduce_user
            next: END

      - action: utter_introduce_user
        id: introduce_user

      # - collect: user_type
      #   id: user_type
      #   description: ask what flow the user wants to go to, the user can either go to "especialidades", "cadastro" or "consultas" by saying what he wants to do
      # - noop: true
      #   next: 
      #     - if: slots.user_type == "especialidades"
      #       then:
      #         - link: specialties
      #     - if: slots.user_type == "cadastro"
      #       then:
      #         - link: registration
      #     - if: slots.user_type == "consultas"
      #       then:
      #         - link: appointment
      #     - else:
      #         END
        
        